
ignore(123)
ignore(456)

def id(x):
  x

def const(x,y):
  x

var n123 = id(123)
var n456 = const(456, 123)

def const777(x):
  const(777, x)

var a = const777(123)
var a = const777(456)
var a = const777(id)
var a = const777(const777)

def fac(n):
  if(n = 0):
    1
  else:
    n * fac(n - 1)

var fac5 = fac(5)
var fac10 = fac(10)

var foldr = List.fold_right

def $(|>)(x, f):
  f(x)

def fold_right(init, func, list):
  List.fold_right(func, list, init)

def map(func, list):
  list |> fold_right([])^(elem, acc):
    func(elem)::acc

var list = [1; 2; 3]
var doubled = list |> map($(*)(2))
var tripled = list |> map^(x): x * 3

Printf.printf("1 + 1 = %d\n", 1 + 1)
List.iter(Printf.printf("\"%d\"\n"), list)

var buf = Buffer.create(256)
Buffer.add_char(buf, '\'')
Buffer.add_string(buf, "ABC")
Buffer.add_char(buf, '\'')
Buffer.add_char(buf, '\n')
Buffer.add_string(buf, "DEF")
Buffer.add_char(buf, 'G')
Printf.printf("%s\n", Buffer.contents(buf))

var pow_2_10 = float_of_int(2) ** float_of_int(10)

var a = (1, true, "abc", 'd')
var unit = ()
